<!DOCTYPE html>
<html dir='ltr' lang='en'>
  <head>
    <meta content='text/html; charset=utf-8' http-equiv='content-type' />
    <title>
convert 
    </title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script src='js/jquery.js' type='text/javascript'></script>
    <script src='js/convert.js' type='text/javascript'></script>

<script type="text/javascript">

$(function(){

  var data = null;
  $.getJSON('js/subfile.json', function(resp){
    data = resp;
    storeRules(data);
  })

  function storeRules(data){
    $('#rules').data('rules', data);
    $.each(data, function(i, datum){
      var
        code = datum[0],
        letter = datum[1];
      code = code.replace('{','').replace('}','');
      $('#rules').append('<li class=rule><kbd>'+letter+'</kbd> <output>' +code+'</output></li>');
    })
  }

  function convert(text){
    var rules = $('#rules').data('rules');
    rules.sort(function(a,b){ return b[0].length < a[0].length ? -1 : 1; });
    $.each(rules, function(i, rule){
      var before = rule[0], after = rule[1];
      text = text.replace(before, after, 'g');
    })
    return text;
  }

  $('#before').keyup(function(ev){

    var before = $('#before').attr('value');
    var after = convert(before);
    $('#after').attr('value', after);

    if(ev.which == 27){

      $('#before').val($('#after').attr('value'));
    }

  })

})

</script>

    <style type="text/css">

#content { 
  overflow:auto;
  padding: 2em;
}

textarea { 
  letter-spacing: 2px;
  font-size: 2em ;
  line-height: 150%;
  width: 40%;
  border: 1px solid black;
  height: 400px;
}

textarea#before {   }

textarea#after { 
  float:right;  
}

    </style>
  </head>
<p>Unicode input helper
</p>
  <body class='mainpage'>


  <div id="content">
<textarea spellcheck=false id="before"></textarea>
<textarea spellcheck=false id="after"></textarea>
<div id=rules>
  <p><input type=search id=searchRules></p>
</div>
  </div><!--  #content -->

  </body>
</html>






